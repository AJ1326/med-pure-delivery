<!--Adding search bar at the top-->
<!--<form class="search-container">-->
<!--  <button class="btn btn-dark btn-fw btn-add-order" type="button" (click)="openModal(addmedicine)">+</button>-->
<!--  <button (click)="openModal(addSalesman)" class="add_salesman_desktop btn btn-dark btn-fw" type="button">-->
<!--    Add Salesman-->
<!--  </button>-->
<!--<input
    type="text"
    id="search-bar"
    placeholder="Search your products here !!!"
    class="form-control"
    [class.is-invalid]="searchFailed"
    [(ngModel)]="model"
    [ngbTypeahead]="search"
    name="searching"
    (selectItem)="selectedItem($event)"
    [resultTemplate]="rt"
    [inputFormatter]="formatter"
  />
  <a><img class="search-icon" src="http://www.endlessicons.com/wp-content/uploads/2012/12/search-icon.png"/></a>
  <span *ngIf="searching">searching...</span>
  <div class="invalid-feedback" *ngIf="searchFailed">Sorry, suggestions could not be loaded.</div>
  <div class="invalid-feedback" *ngIf="search_value">Sorry, suggestions could not be loaded.</div>-->
<!--</form>-->

<div class="row desktop-salesman-container">
  <div class="col-12 grid-margin">
    <div class="card">
      <div class="card-body">
        <div class="manage_salesman_list">
          <span class="card-title mb-4" style="flex-grow: 1; font-size: 18px; margin-bottom: 0 !important;"
            >Manage Salesman</span
          >
          <button
            *ngIf="connectedSalesmanList.length > 0"
            style="float: right;"
            (click)="openModal(addSalesman)"
            class="add_salesman_desktop btn btn-dark btn-fw"
            type="button"
          >
            Add Salesman
          </button>
        </div>
        <div class="fluid-container">
          <div *ngIf="connectedSalesmanList.length > 0; else empty_data">
            <div
              class="row ticket-card mt-3 pb-2 border-bottom pb-3 mb-3"
              *ngFor="let connection of connectedSalesmanList; let i = index"
            >
              <div class="col-2">
                <img
                  class="img-sm rounded-circle mb-4 mb-md-0"
                  src="../../assets/images/show-faces/salesman.png"
                  alt="profile image"
                />
              </div>
              <div class="ticket-details col-8">
                <div class="d-flex">
                  <p class="text-dark font-weight-semibold mr-2 mb-0 no-wrap">{{ connection.salesman.name }} :</p>
                  <p class="text-primary mr-1 mb-0">[#{{ connection.salesman.salesman_id }}]</p>
                </div>
                <p class="text-gray ellipsis mb-2">
                  {{ connection.salesman.email }}
                </p>
              </div>

              <div class="ticket-actions col-md-2">
                <div class="btn-group" *ngIf="connection.is_active == false">
                  <button
                    type="button"
                    class="btn btn-success btn-sm"
                    (click)="addOrRemoveExistingConnection(true, connection.uuid)"
                  >
                    Add
                  </button>
                </div>
                <div class="btn-group" *ngIf="connection.is_active == true">
                  <button
                    type="button"
                    class="btn btn-danger btn-sm"
                    (click)="addOrRemoveExistingConnection(false, connection.uuid)"
                  >
                    Remove
                  </button>
                </div>
              </div>
            </div>
          </div>
          <ng-template #empty_data>
            <div class="empty_cart_container">
              <span class="empty_cart_text_message"
                >No connected salesman. <a href="distributor/add-salesman">Add Salesman !!</a></span
              >
              <img class="empty-cart-data" src="../../assets/images/salesman/connect_team.svg" />
            </div>
          </ng-template>
        </div>
      </div>
    </div>
  </div>
</div>

<!--<ng-template #rt let-r="result" let-t="term">
  <ngb-highlight [result]="r.name" [term]="t"></ngb-highlight>
</ng-template>-->

<div class="outer-add-container">
  <div class="floatcontainer">
    <button
      (click)="openModal(addSalesman)"
      style="cursor: pointer; width: 75px; height: 75px; background-color: #ec2c70;"
      class="btn social-btn btn-facebook btn-rounded"
      type="button"
    >
      <i style="color: white; font-size: 32px" class="mdi mdi-plus"></i>
    </button>
  </div>
</div>

<ng-template #addSalesman let-modal>
  <div class="modal-header">
    <div class="modal-title add-med-head" id="modal-basic-title">Add salesman</div>
    <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <div class="col-12 grid-margin">
      <div class="card">
        <div class="card-body">
          <div class="row">
            <div class="col-md-12">
              <h4 class="card-title">Connect via Salesman-ID</h4>
              <div class="add_salesman_via_link">
                <input
                  class="form-control ng-pristine ng-valid ng-touched"
                  id="typeahead-basic"
                  type="text"
                  [(ngModel)]="searchID"
                />
                <button class="btn btn-success" type="button" (click)="searchSalesmanViaID()">Search</button>
              </div>
              <div class="text-danger" *ngIf="nosalesman">No salesman found.</div>
            </div>

            <div *ngIf="salesmanList.length > 0">
              <div class="row ticket-card mt-3 m-0 p-0" *ngFor="let salesman of salesmanList; let i = index">
                <div class="col-md-2">
                  <img
                    class="img-sm rounded-circle mb-4 mb-md-0"
                    src="../../assets/images/show-faces/salesman.png"
                    alt="profile image"
                  />
                </div>
                <div class="ticket-details col-md-9">
                  <div class="d-flex">
                    <p class="text-dark font-weight-semibold mr-2 mb-0 no-wrap">{{ salesman.name }} :</p>
                    <p class="text-primary mr-1 mb-0">[#{{ salesman.salesman_id }}]</p>
                  </div>
                  <p class="text-gray ellipsis mb-2">
                    {{ salesman.email }}
                  </p>
                </div>

                <div class="ticket-actions col-md-1 ">
                  <button type="button" class="btn btn-success btn-sm" (click)="connectSalesman(salesman.salesman_id)">
                    Add
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="h-line"><span>Or</span></div>
        <div class="col-md-12">
          <!--              <h4 class="card-title"></h4>-->
          <button
            (click)="navigateToAddSalesman()"
            style="margin: auto;display: table; margin-top: 2em;"
            class="btn btn-primary"
            type="button"
          >
            <i class="mdi mdi-printer"></i>Register new Salesman
          </button>
        </div>
      </div>
    </div>
  </div>
</ng-template>
