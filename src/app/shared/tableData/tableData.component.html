<form style="margin-top: 20px">
  <ngb-accordion #acc="ngbAccordion">
    <ngb-panel *ngFor="let order of orderListData">
      <!--Desktop and tablet view-->
      <ng-template ngbPanelTitle>
        <div class="row desktop-view">
          <div class="col-md-2">
            <span class="sub-accordian-heading">Order date</span>
          </div>
          <div class="col-md-2">
            <span class="sub-accordian-heading">Amount</span>
          </div>
          <div class="col-md-5"></div>
          <div class="col-md-2">
            <span class="media-sub-accordian-heading sub-accordian-heading">ORDER # {{ order.order_id }}</span>
          </div>
        </div>
        <div class="row mobile-view">
          <div class="col-md-2">
            <span class="sub-accordian-heading">Ordered on</span>
          </div>
          <div class="col-md-2">
            <span style="color: #00000087;">{{ order.order_date }}</span>
          </div>
          <div class="col-md-2">
            <span class="sub-accordian-heading">Amount</span>
          </div>
          <div class="col-md-2">
            <span class="total_amount_display">{{ order.total_amount }}</span>
          </div>
        </div>
        <div class="row desktop-view" style="margin-top: 10px;">
          <div class="col-md-2">
            <span style="color: #00000087;">{{ order.order_date }}</span>
          </div>
          <div class="col-md-2">
            <span>{{ order.total_amount }}</span>
          </div>
          <div *ngIf="role_type === 'distributor'" class="col-md-2 offset-md-5">
            <button
              class="continue btn btn-inverse-success btn-rounded btn-fw btn-yes btn-accept"
              type="button"
              (click)="csvDownload(order.uuid); $event.stopPropagation()"
            >
              CSV
            </button>
          </div>
        </div>
        <div class="row mobile-view" style="margin-top: 10px;">
          <div class="col-md-5"></div>
          <div class="col-md-2">
            <span class="media-sub-accordian-heading sub-accordian-heading">ORDER # {{ order.order_id }}</span>
          </div>
          <!--<div class="col-md-2">-->
          <!--<span style="color: #00000087;">{{ order.order_date }}</span>-->
          <!--</div>-->
          <!--<div class="col-md-2">-->
          <!--<span>{{ order.total_amount }}</span>-->
          <!--</div>-->
          <div *ngIf="role_type === 'distributor'" class="col-md-2 offset-md-5">
            <button
              class="continue btn btn-inverse-success btn-rounded btn-fw btn-yes btn-accept"
              type="button"
              (click)="csvDownload(order.uuid); $event.stopPropagation()"
            >
              CSV
            </button>
          </div>
        </div>
      </ng-template>
      <!--Mobile view-->

      <div class="profile-image">
        <!--<span class="img-xs rounded-circle profile_circle"><strong>{{ user_info['name'].charAt(0).toUpperCase() }}</strong></span>-->
        <i class="fa fa-arrow-circle-down" aria-hidden="true"></i>
        <!--<img class="img-xs rounded-circle" src="../../../assets/images/faces/avatar.png" alt="profile image" />-->
      </div>
      <ng-template ngbPanelContent>
        <div class="wrap cf" style="margin-top: -30px;">
          <!--<h1 class="projTitle">Responsive Table<span>-Less</span> Shopping Cart</h1>-->
          <div *ngIf="role_type === 'retailer'" class="heading cf">
            <h1 class="product_detail">Product detail</h1>
            <!--<div *ngIf="role_type === 'distributor'" style="text-align: right;">-->
            <!--<button class="continue btn btn-inverse-success btn-rounded btn-fw btn-yes btn-accept" type="button">-->
            <!--Accepted-->
            <!--</button>-->
            <!--<button class="continue btn btn-inverse-success btn-rounded btn-fw btn-yes btn-reject" type="button">-->
            <!--Rejected-->
            <!--</button>-->
            <!--</div>-->
            <div style="text-align: right;">
              <button
                (click)="open(Reorder, order)"
                class="continue btn btn-inverse-success btn-rounded btn-fw btn-yes btn-accept reorder_btn"
                type="button"
              >
                Re-order
              </button>
            </div>
          </div>
          <div class="cart">
            <ul class="cartWrap">
              <li
                class="items"
                *ngFor="let products of order.order_details; let i = index"
                [attr.data-index]="i"
                [ngClass]="i % 2 === 0 ? 'even' : 'odd'"
              >
                <div class="infoWrap">
                  <div class="cartSection cart-full-box">
                    <p class="itemNumber">ORDER # {{ order.order_id }}</p>
                    <h3>{{ products.product['name'] }}</h3>
                    <div class="footer-order-data-sub-details">
                      <strong class="sub-order-dropdown-heading">Units ordered :</strong
                      ><span class="product-sub-details">{{ products.quantity }}</span>
                      <strong class="sub-order-dropdown-heading">Price:</strong
                      ><i class="fa fa-inr" aria-hidden="true"></i
                      ><span class="product-sub-details">{{ products.product.price }}</span>
                      <strong *ngIf="role_type === 'retailer'" class="sub-order-dropdown-heading"
                        >Distributor name:</strong
                      >
                      <span *ngIf="role_type === 'retailer'" class="product-sub-details">{{
                        products['distributor']['name']
                      }}</span>
                      <strong *ngIf="role_type === 'distributor'" class="sub-order-dropdown-heading"
                        >Retailer name:</strong
                      >
                      <span *ngIf="role_type === 'distributor'" class="product-sub-details">{{
                        products['retailer']['name']
                      }}</span>
                    </div>
                  </div>

                  <div
                    *ngIf="products['status'] === 'rejected_by_distributor' && role_type === 'retailer'"
                    class="badge badge-retailer-status add-btn cancel_btn"
                    ngbTooltip="Rejected by distributor"
                  >
                    cancelled
                  </div>
                  <button
                    *ngIf="role_type === 'distributor' && !(products['status'] === 'rejected_by_distributor')"
                    class="distributor-reject continue btn btn-inverse-success btn-rounded btn-fw btn-yes btn-reject"
                    (click)="open(Reject, products)"
                    type="button"
                  >
                    Reject
                  </button>
                  <!--<div *ngIf="role_type === 'distributor'" class="badge badge-distributor-status add-btn">Reject</div>-->
                </div>
                <div class="prodTotal cartSection cart-amount">
                  <p style="font-size: 20px; margin-top: -10px">
                    <i style="color: #00a855" class="fa fa-inr" aria-hidden="true"></i
                    ><span>{{ (products.quantity * products.product.price).toFixed(2) }}</span>
                  </p>
                </div>
              </li>
            </ul>
          </div>
        </div>
      </ng-template>
    </ngb-panel>
  </ngb-accordion>

  <div class="d-flex justify-content-between p-2" style="margin-top: 2%;">
    <ngb-pagination
      class="pagination-separated"
      [collectionSize]="total$ | async"
      [(page)]="tableDataService.page"
      [pageSize]="tableDataService.pageSize"
    >
    </ngb-pagination>

    <select class="custom-select" style="width: auto" name="pageSize" [(ngModel)]="tableDataService.pageSize">
      <option [ngValue]="10">10</option>
      <option [ngValue]="25">25</option>
      <option [ngValue]="50">50</option>
    </select>
  </div>
</form>

<ng-template #Reject let-modal>
  <div class="modal-header">
    <h4 class="modal-title" id="modal-basic-title" style="font-size: 18px;">Are you sure ?</h4>
    <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-footer">
    <button
      class="btn btn-success btn-rounded btn-fw btn-yes"
      type="button"
      (click)="submitAlert(); modal.dismiss('yes click')"
    >
      Yes
    </button>
    <button class="btn btn-danger btn-rounded btn-fw btn-no" type="button" (click)="modal.dismiss('cancel click')">
      No
    </button>
  </div>
</ng-template>

<ng-template #Reorder let-modal>
  <div class="modal-header">
    <h4 class="modal-title" id="modal-reorder">Order list</h4>
    <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <form>
      <div class="form-group">
        <label>Product list</label>
        <div class="input-group"></div>
      </div>
    </form>
  </div>
  <div class="modal-footer">
    <button class="btn btn-inverse-success btn-rounded btn-fw btn-yes" type="button">
      Yes
    </button>
    <button class="btn btn-inverse-danger btn-rounded btn-fw btn-no" type="button">
      No
    </button>
  </div>
</ng-template>
